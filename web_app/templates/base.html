<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}AgriLogix{% endblock %} | ğŸŒ¾ AgriLogix</title>
    {% block extra_head %}{% endblock %}
</head>
<body>

    <!-- NAVBAR -->
    <nav id="navbar">
        <div id="nav-brand">
            <a href="{% url 'dashboard' %}">ğŸŒ¾ AgriLogix</a>
        </div>

        <ul id="nav-links">
            <li><a href="{% url 'dashboard' %}">ğŸ  Dashboard</a></li>
            <li><a href="{% url 'product_list' %}">ğŸ¥¦ Products</a></li>
            <li><a href="{% url 'farm_list' %}">ğŸŒ¾ Farms</a></li>
            <li><a href="{% url 'order_list' %}">ğŸ“¦ Orders</a></li>
            <li><a href="{% url 'shipment_list' %}">ğŸš› Shipments</a></li>
            <li><a href="{% url 'cold_storage_list' %}">â„ï¸ Cold Storage</a></li>
            <li><a href="{% url 'route_list' %}">ğŸ—ºï¸ Routes</a></li>
            <li><a href="{% url 'analytics_dashboard' %}">ğŸ“Š Analytics</a></li>
        </ul>

        <div id="nav-user">
            {% if user.is_authenticated %}
                <span>ğŸ‘¤ {{ user.get_full_name|default:user.username }}</span>
                <span class="role-badge">{{ user.get_role_display }}</span>
                <a href="{% url 'notification_list' %}">
                    ğŸ”” Notifications
                    {% if unread_count %}
                        <span class="badge">{{ unread_count }}</span>
                    {% endif %}
                </a>
                <a href="{% url 'profile' %}">Profile</a>
                <form method="post" action="{% url 'logout' %}" style="display:inline">
                    {% csrf_token %}
                    <button type="submit">Logout</button>
                </form>
            {% else %}
                <a href="{% url 'login' %}">Login</a>
                <a href="{% url 'register' %}">Register</a>
            {% endif %}
        </div>
    </nav>

    <!-- MESSAGES -->
    {% if messages %}
        <div id="messages">
            {% for message in messages %}
                <div class="message message-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}

    <!-- BREADCRUMB -->
    {% block breadcrumb %}{% endblock %}

    <!-- MAIN CONTENT -->
    <main id="main-content">
        {% block content %}{% endblock %}
    </main>

    <!-- FOOTER -->
    <footer id="footer">
        <p>ğŸŒ¾ AgriLogix â€” Connecting Farmers to Markets | &copy; {% now "Y" %} AgriLogix Kenya</p>
        <p>
            <a href="{% url 'market_prices' %}">Market Prices</a> |
            <a href="{% url 'loss_report_list' %}">Loss Reports</a> |
            <a href="{% url 'dispute_list' %}">Disputes</a>
        </p>
    </footer>

    {% block extra_js %}{% endblock %}
</body>
</html>