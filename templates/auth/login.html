<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login | AgriLogix</title>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">

    <style>
    :root {
        --white:        #ffffff;
        --off-white:    #f5f8f2;
        --surface:      #edf3e6;
        --border:       #d6e5c8;
        --border-light: #e8f0df;
        --green-700:    #2d5a1b;
        --green-500:    #3e7c23;
        --green-400:    #56a030;
        --green-300:    #78c048;
        --green-100:    #c8e6b0;
        --green-50:     #eaf5df;
        --amber-400:    #d4920f;
        --amber-100:    #fdf0d5;
        --text-primary: #1a2e10;
        --text-second:  #3d5c2a;
        --text-muted:   #6b8a58;
        --text-placeholder: #9ab888;
        --radius:       10px;
        --radius-lg:    16px;
        --shadow-xs:    0 1px 3px rgba(30,60,15,.07);
        --shadow-md:    0 6px 24px rgba(30,60,15,.13);
        --shadow-lg:    0 16px 48px rgba(30,60,15,.16);
        --ease:         cubic-bezier(.4,0,.2,1);
        --dur:          260ms;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }
    body {
        font-family: 'DM Sans', sans-serif;
        background: var(--off-white);
        min-height: 100vh;
        display: flex;
        align-items: stretch;
    }
    a { text-decoration: none; color: inherit; }

    /* ── Split layout ─────────────────────────────────── */
    .login-layout {
        display: flex;
        width: 100%;
        min-height: 100vh;
    }

    /* Left decorative panel */
    .login-panel {
        flex: 1;
        background: linear-gradient(160deg, var(--green-700) 0%, var(--green-500) 50%, var(--green-400) 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 60px 56px;
        position: relative;
        overflow: hidden;
    }
    .login-panel::before {
        content: '';
        position: absolute; inset: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    /* Decorative circles */
    .login-panel::after {
        content: '';
        position: absolute;
        width: 400px; height: 400px;
        border-radius: 50%;
        background: rgba(255,255,255,.05);
        bottom: -120px; right: -100px;
    }
    .panel-deco-circle {
        position: absolute;
        width: 240px; height: 240px;
        border-radius: 50%;
        background: rgba(255,255,255,.04);
        top: -60px; left: -60px;
    }

    .panel-logo {
        display: flex; align-items: center; gap: 12px;
        margin-bottom: 48px; position: relative; z-index: 1;
    }
    .panel-logo-icon {
        width: 44px; height: 44px;
        background: rgba(255,255,255,.2);
        border-radius: 11px;
        display: flex; align-items: center; justify-content: center;
        font-size: 22px; color: #fff;
        border: 1px solid rgba(255,255,255,.25);
    }
    .panel-logo-text {
        font-family: 'Playfair Display', serif;
        font-size: 22px; font-weight: 700; color: #fff;
    }

    .panel-heading {
        font-family: 'Playfair Display', serif;
        font-size: 36px; font-weight: 700; color: #fff;
        line-height: 1.25; position: relative; z-index: 1;
        margin-bottom: 16px;
    }
    .panel-sub {
        font-size: 15px; color: rgba(255,255,255,.75);
        line-height: 1.7; max-width: 360px;
        position: relative; z-index: 1;
        margin-bottom: 40px;
    }

    /* Feature pills */
    .panel-features { display: flex; flex-direction: column; gap: 12px; position: relative; z-index: 1; }
    .panel-feature {
        display: flex; align-items: center; gap: 12px;
        background: rgba(255,255,255,.1);
        border: 1px solid rgba(255,255,255,.15);
        border-radius: 10px;
        padding: 11px 16px;
    }
    .pf-icon {
        width: 34px; height: 34px;
        background: rgba(255,255,255,.15);
        border-radius: 8px;
        display: flex; align-items: center; justify-content: center;
        font-size: 16px; color: #fff; flex-shrink: 0;
    }
    .pf-text { font-size: 13.5px; color: rgba(255,255,255,.88); font-weight: 500; }

    /* Bottom tagline */
    .panel-tagline {
        margin-top: auto; padding-top: 40px;
        font-size: 12px; color: rgba(255,255,255,.45);
        position: relative; z-index: 1;
    }

    /* Right form panel */
    .login-form-side {
        width: 480px;
        flex-shrink: 0;
        background: var(--white);
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 52px 48px;
        box-shadow: var(--shadow-lg);
    }
    .form-header { margin-bottom: 32px; }
    .form-header h1 {
        font-family: 'Playfair Display', serif;
        font-size: 26px; font-weight: 700; color: var(--text-primary);
        margin-bottom: 6px;
    }
    .form-header p { font-size: 14px; color: var(--text-muted); }

    /* Messages */
    .msg-list { margin-bottom: 18px; display: flex; flex-direction: column; gap: 8px; }
    .msg {
        display: flex; align-items: center; gap: 9px;
        padding: 10px 13px; border-radius: var(--radius);
        font-size: 13.5px; font-weight: 500; border: 1px solid transparent;
        animation: msgIn .3s var(--ease);
    }
    @keyframes msgIn { from { opacity: 0; transform: translateY(-6px); } to { opacity: 1; transform: translateY(0); } }
    .msg-error   { background: #fff4f4; border-color: #f5b0b0; color: #8c1e1e; }
    .msg-success { background: #f0faf2; border-color: #a8d8b0; color: #1d5c25; }
    .msg-warning { background: var(--amber-100); border-color: #f5d08a; color: #6e4200; }
    .msg i { font-size: 14px; flex-shrink: 0; }

    /* Form groups */
    .form-group { margin-bottom: 18px; }
    .form-label {
        display: block;
        font-size: 11.5px; font-weight: 700; letter-spacing: .6px;
        text-transform: uppercase; color: var(--text-muted); margin-bottom: 7px;
    }
    .input-wrap { position: relative; }
    .input-icon {
        position: absolute; left: 13px; top: 50%;
        transform: translateY(-50%);
        font-size: 15px; color: var(--text-muted); pointer-events: none;
        transition: color var(--dur);
    }
    .form-input {
        width: 100%; height: 44px;
        background: var(--surface); border: 1.5px solid transparent;
        border-radius: 10px; padding: 0 44px 0 40px;
        font-family: 'DM Sans', sans-serif; font-size: 14px; color: var(--text-primary);
        outline: none;
        transition: border-color .2s, background .2s, box-shadow .2s;
    }
    .form-input:focus {
        border-color: var(--green-300);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(120,192,72,.15);
    }
    .form-input:focus ~ .input-icon,
    .input-wrap:focus-within .input-icon { color: var(--green-500); }
    .form-input::placeholder { color: var(--text-placeholder); }

    /* Password toggle */
    .pw-toggle {
        position: absolute; right: 12px; top: 50%;
        transform: translateY(-50%);
        background: none; border: none; cursor: pointer;
        font-size: 16px; color: var(--text-muted);
        transition: color var(--dur); padding: 2px;
    }
    .pw-toggle:hover { color: var(--green-500); }

    /* Submit button */
    .btn-login {
        width: 100%; height: 46px;
        background: linear-gradient(135deg, var(--green-500), var(--green-400));
        color: #fff; border: none; border-radius: 10px;
        font-family: 'DM Sans', sans-serif;
        font-size: 15px; font-weight: 700; cursor: pointer;
        box-shadow: 0 3px 14px rgba(62,124,35,.3);
        transition: opacity .2s, box-shadow .2s, transform .15s;
        display: flex; align-items: center; justify-content: center; gap: 8px;
        margin-top: 6px;
    }
    .btn-login:hover { opacity: .92; box-shadow: 0 5px 20px rgba(62,124,35,.38); transform: translateY(-1px); }
    .btn-login:active { transform: translateY(0); }

    /* Register link */
    .register-link {
        text-align: center; margin-top: 22px;
        font-size: 13.5px; color: var(--text-muted);
    }
    .register-link a {
        color: var(--green-500); font-weight: 600;
        transition: color .18s;
    }
    .register-link a:hover { color: var(--green-700); }

    /* Footer note */
    .form-footer {
        margin-top: 36px; padding-top: 20px;
        border-top: 1px solid var(--border-light);
        display: flex; align-items: center; gap: 8px;
        font-size: 11.5px; color: var(--text-placeholder);
    }
    .form-footer i { font-size: 13px; color: var(--green-300); }

    /* ── Responsive ──────────────────────────────────── */
    @media (max-width: 900px) {
        .login-panel { display: none; }
        .login-form-side { width: 100%; padding: 40px 32px; }
    }
    @media (max-width: 480px) {
        .login-form-side { padding: 32px 22px; }
        .panel-heading { font-size: 28px; }
    }
    </style>
</head>
<body>

<div class="login-layout">

    <!-- ── Left decorative panel ──────────────────────── -->
    <div class="login-panel">
        <div class="panel-deco-circle"></div>

        <div class="panel-logo">
            <div class="panel-logo-icon"><i class="bi bi-flower1"></i></div>
            <span class="panel-logo-text">AgriLogix</span>
        </div>

        <h1 class="panel-heading">Farm to Market,<br>Simplified.</h1>
        <p class="panel-sub">
            Connect directly with buyers, manage your harvests, and track shipments — all in one place.
        </p>

        <div class="panel-features">
            <div class="panel-feature">
                <div class="pf-icon"><i class="bi bi-graph-up-arrow"></i></div>
                <span class="pf-text">Real-time market prices and analytics</span>
            </div>
            <div class="panel-feature">
                <div class="pf-icon"><i class="bi bi-truck"></i></div>
                <span class="pf-text">End-to-end cold chain shipment tracking</span>
            </div>
            <div class="panel-feature">
                <div class="pf-icon"><i class="bi bi-people-fill"></i></div>
                <span class="pf-text">Direct farmer–buyer connections, no middlemen</span>
            </div>
        </div>

        <div class="panel-tagline">
            &copy; {% now "Y" %} AgriLogix Kenya · Connecting Farmers to Markets
        </div>
    </div>

    <!-- ── Right form ─────────────────────────────────── -->
    <div class="login-form-side">
        <div class="form-header">
            <h1>Welcome back</h1>
            <p>Sign in to your AgriLogix account</p>
        </div>

        {% if messages %}
        <div class="msg-list">
            {% for message in messages %}
            <div class="msg {% if 'error' in message.tags or 'danger' in message.tags %}msg-error{% elif 'success' in message.tags %}msg-success{% else %}msg-warning{% endif %}">
                {% if 'error' in message.tags or 'danger' in message.tags %}<i class="bi bi-x-circle-fill"></i>
                {% elif 'success' in message.tags %}<i class="bi bi-check-circle-fill"></i>
                {% else %}<i class="bi bi-exclamation-triangle-fill"></i>{% endif %}
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <form method="post" action="{% url 'login' %}">
            {% csrf_token %}

            <div class="form-group">
                <label class="form-label" for="username">Username</label>
                <div class="input-wrap">
                    <i class="bi bi-person input-icon"></i>
                    <input class="form-input" type="text" id="username" name="username"
                           required autofocus placeholder="Enter your username"
                           autocomplete="username">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" for="password">Password</label>
                <div class="input-wrap">
                    <i class="bi bi-lock input-icon"></i>
                    <input class="form-input" type="password" id="password" name="password"
                           required placeholder="Enter your password"
                           autocomplete="current-password">
                    <button type="button" class="pw-toggle" onclick="togglePw()" title="Show/hide password">
                        <i class="bi bi-eye" id="pwIcon"></i>
                    </button>
                </div>
            </div>

            <button type="submit" class="btn-login">
                <i class="bi bi-box-arrow-in-right"></i> Sign In
            </button>
        </form>

        <p class="register-link">
            Don't have an account?
            <a href="{% url 'register' %}">Create one →</a>
        </p>

        <div class="form-footer">
            <i class="bi bi-shield-check"></i>
            Your data is secure and encrypted. AgriLogix never shares your information.
        </div>
    </div>

</div>

<script>
function togglePw() {
    const input = document.getElementById('password');
    const icon  = document.getElementById('pwIcon');
    if (input.type === 'password') {
        input.type = 'text';
        icon.className = 'bi bi-eye-slash';
    } else {
        input.type = 'password';
        icon.className = 'bi bi-eye';
    }
}
</script>
</body>
</html>